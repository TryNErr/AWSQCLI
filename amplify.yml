version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "ðŸš€ QuizWiz Frontend Deployment (Cheapest Option)"
        - cd quizwiz-app/frontend
        - echo "Installing dependencies..."
        - npm install
        - echo "âœ… Dependencies installed"
    build:
      commands:
        - echo "ðŸ”¨ Building React application..."
        - echo "REACT_APP_API_URL=https://placeholder-api.execute-api.us-east-1.amazonaws.com/prod" > .env.production.local
        - echo "REACT_APP_ENVIRONMENT=production" >> .env.production.local
        - echo "GENERATE_SOURCEMAP=false" >> .env.production.local
        - npm run build
        - echo "âœ… Build completed"
    postBuild:
      commands:
        - echo "ðŸ“¦ Verifying build..."
        - test -f build/index.html && echo "âœ… index.html exists" || exit 1
        - echo "ðŸŽ‰ Frontend ready"
  artifacts:
    baseDirectory: quizwiz-app/frontend/build
    files:
      - '**/*'
  cache:
    paths:
      - quizwiz-app/frontend/node_modules/**/*
